---
title: "Chatbot Arena: Benchmarking LLMs in the Wild with Elo Ratings"
author: "Lianmin Zheng*, Ying Sheng*, Wei-Lin Chiang, Hao Zhang, Joseph E. Gonzalez, Ion Stoica"
date: "May 3, 2023"
previewImg: /images/blog/arena/cover.png
---

We present Chatbot Arena, a benchmark platform for large language models (LLMs) that features anonymous, randomized battles in a crowdsourced manner. In this blog post, we are releasing our initial results and a leaderboard based on the Elo rating system, which is a widely-used rating system in chess and other competitive games. We invite the entire community to join this effort by contributing new models and evaluating them by asking questions and voting for your favorite answer.

<style>
th {text-align: left}
td {text-align: left}
</style>

<br>
<p style="color:gray; text-align: center;">Table 1. Elo ratings of popular open-source large language models.</p>
<table style="display: flex; justify-content: center;" align="left" >
<tbody>
<tr>
<th>Rank</th> <th>Model</th> <th>Elo Rating</th> <th>Description</th>
</tr>
<tr>
<td>1</td> <td>ðŸ¥‡ <a href="https://vicuna.lmsys.org" target="_blank">vicuna-13b</a></td> <td>1169</td> <td>a chat assistant fine-tuned from LLaMA on user-shared conversations by LMSYS</td>
</tr>
<tr>
<td>2</td> <td>ðŸ¥ˆ <a href="https://bair.berkeley.edu/blog/2023/04/03/koala" target="_blank">koala-13b</a></td> <td>1082</td> <td>a dialogue model for academic research by BAIR</td>
</tr>
<tr>
<td>3</td> <td>ðŸ¥‰ <a href="https://open-assistant.io" target="_blank">oasst-pythia-12b</a></td> <td>1065</td> <td>an Open Assistant for everyone by LAION</td>
</tr>
<tr>
<td>4</td> <td><a href="https://crfm.stanford.edu/2023/03/13/alpaca.html" target="_blank">alpaca-13b</a></td> <td>1008</td> <td>a model fine-tuned from LLaMA on instruction-following demonstrations by Stanford</td>
</tr>
<tr>
<td>5</td> <td><a href="https://chatglm.cn/blog" target="_blank">chatglm-6b</a></td> <td>985</td> <td>an open bilingual dialogue language model by Tsinghua University</td>
</tr>
<tr>
<td>6</td> <td><a href="https://huggingface.co/lmsys/fastchat-t5-3b-v1.0" target="_blank">fastchat-t5-3b</a></td> <td>951</td> <td>a chat assistant fine-tuned from FLAN-T5 by LMSYS</td>
</tr>
<tr>
<td>7</td> <td><a href="https://www.databricks.com/blog/2023/04/12/dolly-first-open-commercially-viable-instruction-tuned-llm" target="_blank">dolly-v2-12b</a></td> <td>944</td> <td>an instruction-tuned open large language model by Databricks</td>
</tr>
<tr>
<td>8</td> <td><a href="https://arxiv.org/abs/2302.13971" target="_blank">llama-13b</a></td> <td>932</td> <td>open and efficient foundation language models by Meta</td>
</tr>
<tr>
<td>9</td> <td><a href="https://github.com/stability-AI/stableLM" target="_blank">stablelm-tuned-alpha-7b</a></td> <td>858</td> <td>Stability AI language models</td>
</tr>
</tbody>
</table>

Table 1 displays the Elo ratings of eight popular models, which are based on the 4.7K voting data and calculations shared in this [notebook](https://colab.research.google.com/drive/1lAQ9cKVErXI1rEYq7hTKNaCQ5Q8TzrI5?usp=sharing). You can also try the voting demo below at [https://arena.lmsys.org](https://arena.lmsys.org).

<img src="/images/blog/arena/chat_demo.png" style="display:block; margin-top: auto; margin-left: auto; margin-right: auto; margin-bottom: auto;"></img>
<p style="color:gray; text-align: center;">Figure 1. The side-by-side chatting and voting interface.</p>

## Introduction
Following the great success of ChatGPT, there has been a proliferation of open-source large language models that are finetuned to follow instructions. These models are capable of providing valuable assistance in response to usersâ€™ questions/prompts. Notable examples include Alpaca and Vicuna, based on LLaMA, and OpenAssistant and Dolly, based on Pythia.

Despite the constant release of new models every week, the community faces a challenge in benchmarking these models effectively. Benchmarking LLM assistants is extremely challenging because the problems can be open-ended, and it is very difficult to write a program to automatically evaluate the response quality. In this case, we typically have to resort to human evaluation based on pairwise comparison.

There are some desired properties for a good benchmark system based on pairwise comparison.
- **Scalability**. The system should scale to a large number of models when it is not feasible to collect sufficient data for all possible model pairs.
- **Incrementality**. The system should be able to evaluate a new model using a relatively small number of trials.
- **Unique order**. The system should provide a unique order for all models. Given any two models, we should be able to tell which ranks higher or whether they are tied.

Existing LLM benchmark systems rarely satisfy all of these properties. Classical LLM benchmark frameworks, such as [HELM](https://crfm.stanford.edu/helm/latest/) and [lm-evaluation-harness](https://github.com/EleutherAI/lm-evaluation-harness), provide multi-metric measurements for tasks commonly used in academic research. However, they are not based on pairwise comparison and are not effective at evaluating open-ended questions. OpenAI also launched the [evals](https://github.com/openai/evals) project to collect better questions, but this project does not provide ranking mechanisms for all participated models. When we launched our [Vicuna](https://vicuna.lmsys.org/) model, we utilized a GPT-4-based evaluation pipeline, but it does not provide a solution for scalable and incremental ratings.

In this blog post, we introduce Chatbot Arena, an LLM benchmark platform featuring anonymous randomized battles in a crowdsourced manner. Chatbot Arena adopts the [Elo rating system](https://en.wikipedia.org/wiki/Elo_rating_system), which is a widely-used rating system in chess and other competitive games. The Elo rating system is promising to provide the desired property mentioned above. 

To collect data, we launched the arena with several popular open-source LLMs one week ago. In the arena, a user can chat with two anonymous models side-by-side and vote for which one is better. This crowdsourcing way of data collection represents some use cases of LLMs in the wild. A comparison between several evaluation methods is shown in Table 1.

<br>
<p style="color:gray; text-align: center;">Table 2: Comparison between different evaluation methods.</p>
<table style="display: flex; justify-content: center;">
<tbody>
<tr>
<th></th> <th>HELM / lm-evaluation-harness</th> <th>OpenAI/eval</th> <th>Alpaca Evaluation</th> <th>Vicuna Evaluation</th> <th>Chatbot Arena</th>
</tr>
<tr>
<td>Question Source</td> <td>Academic datasets</td> <td>Mixed</td> <td>Self-instruct evaluation set</td> <td>GPT-4 generated</td> <td>User prompts</td>
</tr>
<tr>
<td>Evaluator</td> <td>Program</td> <td>Program/Model</td> <td>Human</td> <td>GPT-4</td> <td>User</td>
</tr>
<tr>
<td>Metrics</td> <td>Basic metrics </td> <td>Basic metrics</td> <td>Win rate</td> <td>Win rate</td> <td>Elo ratings</td>
</tr>
</tbody>
</table>

## Data Collection
We hosted the arena at [https://arena.lmsys.org](https://arena.lmsys.org) with our multi-model serving system, [FastChat](https://github.com/lm-sys/FastChat). When a user enters the arena, they can chat with two anonymous models side-by-side, as shown in Figure 1.
After getting responses from the two models, users can continue chatting or vote for the model they think is better. Once a vote is submitted, the model names will be revealed. Users can continue chatting or restart a new battle with two new randomly chosen anonymous models. The platform logs all user interactions. In our analysis, we only use the votes when the model names are hidden.

The arena was launched about one week ago and we have collected 4.7k valid anonymous votes since then.  We share some exploratory analysis in this [notebook](https://colab.research.google.com/drive/1lAQ9cKVErXI1rEYq7hTKNaCQ5Q8TzrI5?usp=sharing) and present a short summary here.

<img src="/images/blog/arena/battle_counts.png" style="display:block; margin-top: auto; margin-left: auto; margin-right: auto; margin-bottom: auto; width: 60%"></img>
<p style="color:gray; text-align: center;">Figure 2: Battle count of each combination of models</p>

Figure 2 shows the battles count of each combination of models. When we initially launched the tournament, we had prior information on the likely ranking based on our benchmarks and chose to pair models according to this ranking. We gave preference to what we believed would be strong pairings based on this ranking. However, we later switched to uniform sampling to get better overall coverage of the rankings. Towards the end of the tournament, we also introduced a new model `fastchat-t5-3b`. All of these result in non-uniform model frequency.

<img src="/images/blog/arena/lang_counts.png" style="display:block; margin-top: auto; margin-left: auto; margin-right: auto; margin-bottom: auto; width: 80%"></img>
<p style="color:gray; text-align: center;">Figure 3: Battle counts for the top-15 languages.</p>

Figure 3 plots the language distribution and shows most user prompts are in English.

## Elo Rating System
The [Elo rating system](https://en.wikipedia.org/wiki/Elo_rating_system) is a method for calculating the relative skill levels of players, which has been widely adopted in competitive games and sports. The difference in the ratings between two players serves as a predictor of the outcome of a match. The Elo rating system works well for our case because we have multiple models and we run pairwise battles between them.

Using the collected data, we compute the Elo ratings of the models in this [notebook](https://colab.research.google.com/drive/1lAQ9cKVErXI1rEYq7hTKNaCQ5Q8TzrI5?usp=sharing) and put the main results in Table 1. You are welcome to try the notebook and play with the voting data by yourself. The data only contains voting results without conversation histories because releasing the conversation history will raise concerns such as privacy and toxicity.

## Pairwise Win Rates
As a basis for calibration, we also present here the pairwise win rates for each model in the tournament (Figure 4) as well as the predicted pairwise win rate estimated using Elo ratings (Figure 5).
By comparing the figures, we find the elo ratings can predict win rates relatively well.

<img src="/images/blog/arena/win_fraction.png" style="display:block; margin-top: auto; margin-left: auto; margin-right: auto; margin-bottom: auto;"></img>
<p style="color:gray; text-align: center;">Figure 4: Fraction of Model A wins for all non-tied A vs. B battles.</p>

<img src="/images/blog/arena/predicted_win_fraction.png" style="display:block; margin-left: auto; margin-right: auto; margin-bottom: auto;"></img>
<p style="color:gray; text-align: center;">Figure 5: Predicted win rate using Elo ratings for Model A in an A vs. B battle</p>

## Future Plans
We plan to work on the following items:
- Add close-source models such as ChatGPT
- Add more open-source models
- Release periodically updated leaderboards (e.g., monthly)
- Implement better sampling algorithms, tournament mechanisms, and serving systems to support a much larger number of models.

We appreciate any feedback from you to make the arena better.

## Join Us
We invite the entire community to join this benchmarking effort by contributing your models and votes for the anonymous models you think provide better answers. You can visit [https://arena.lmsys.org](https://arena.lmsys.org) to vote for better models. If you want to see a specific model in the arena, you can follow this [guide](https://github.com/lm-sys/FastChat/blob/main/docs/arena.md#how-to-add-a-new-model) to help us add it.

## Acknowledgment
We thank other members of the Vicuna team for valuable feedback and MBZUAI for donating compute resources. Additionally, we extend our thanks to Tianjun Zhang and Eric Wallace for their insightful discussions.

## Links
- Demo: [https://arena.lmsys.org](https://arena.lmsys.org)
- GitHub: [https://github.com/lm-sys/FastChat](https://github.com/lm-sys/FastChat)
- Colab notebook: [https://colab.research.google.com/drive/1lAQ9cKVErXI1rEYq7hTKNaCQ5Q8TzrI5?usp=sharing](https://colab.research.google.com/drive/1lAQ9cKVErXI1rEYq7hTKNaCQ5Q8TzrI5?usp=sharing)
